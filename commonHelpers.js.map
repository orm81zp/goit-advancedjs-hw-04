{"version":3,"file":"commonHelpers.js","sources":["../src/js/notifications.js","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const NOTIFICATION_TYPES = {\n  error: 'error',\n  success: 'success',\n};\n\nconst THEME = {\n  [NOTIFICATION_TYPES.error]: {\n    backgroundColor: '#EF4040',\n    messageColor: '#FFFFFF',\n  },\n  [NOTIFICATION_TYPES.success]: {\n    backgroundColor: '#59A10D',\n    messageColor: '#FFFFFF',\n  },\n};\n\nexport const showNotification = (message, type = NOTIFICATION_TYPES.error) => {\n  iziToast.show({\n    ...THEME[type],\n    message,\n    messageSize: '16px',\n    position: 'topRight',\n    maxWidth: 380,\n  });\n};\n","import axios from 'axios';\n\nconst client = axios.create({\n  baseURL: 'https://pixabay.com/api',\n  params: {\n    key: '45059083-8ad77475a4982aeafbefc4919',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  },\n});\n\nclass SearchImageApi {\n  static async search(q, parameters = {}) {\n    const response = await client.get('/', { params: { ...parameters, q } });\n    return response.data;\n  }\n}\n\nexport default SearchImageApi;\n","import 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport { showNotification } from './notifications';\n\nconst simpleLightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n  className: 'simple-lightbox',\n});\n\nconst addFooter = ({ views, comments, downloads, likes }) => {\n  return `\n  <div class=\"gallery-footer\">\n    <div class=\"field\"><div class=\"label\">Likes</div><div class=\"value\">${likes}</div></div>\n    <div class=\"field\"><div class=\"label\">Views</div><div class=\"value\">${views}</div></div>\n    <div class=\"field\"><div class=\"label\">Comments</div><div class=\"value\">${comments}</div></div>\n    <div class=\"field\"><div class=\"label\">Downloads</div><div class=\"value\">${downloads}</div></div>\n  </div>\n  `;\n};\n\nexport const resetImages = (selector = '.gallery') => {\n  const gallery = document.querySelector(selector);\n  gallery.textContent = '';\n};\n\nexport const addImages = (images, selector = '.gallery') => {\n  const gallery = document.querySelector(selector);\n\n  if (images.length === 0) {\n    showNotification(\n      'Sorry, there are no images matching your search query. Please try again!'\n    );\n\n    return;\n  }\n\n  const adjacentImages = images\n    .map(\n      ({ webformatURL, largeImageURL, tags, ...props }) =>\n        `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img\n            class=\"gallery-image\"\n            src=\"${webformatURL}\"\n            alt=\"${tags}\"\n          />\n        </a>\n        ${addFooter(props)}\n      </li>\n      `\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', adjacentImages);\n  simpleLightbox.refresh();\n\n  const { height } = gallery.firstElementChild.getBoundingClientRect();\n  window.scrollBy({ top: height * 2, behavior: 'smooth' });\n};\n","import { showNotification } from './js/notifications';\nimport SearchImageApi from './js/pixabay-api';\nimport { addImages, resetImages } from './js/render-functions';\n\nconst searchForm = document.querySelector('.form-pixabay');\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.load-more');\n\n// default state\nconst state = {\n  searchQuery: '',\n  page: 1,\n  totalPages: 1,\n  per_page: 15,\n};\n\nconst showLoader = (status = true) => {\n  if (status) {\n    loader.classList.add('show');\n  } else {\n    loader.classList.remove('show');\n  }\n};\n\nconst showLoadMoreButton = (status = true) => {\n  if (status) {\n    loadMoreButton.classList.add('show');\n  } else {\n    loadMoreButton.classList.remove('show');\n  }\n};\n\nconst search = async (options = { shouldReset: true }) => {\n  const searchQuery = state.searchQuery.trim();\n  const { page, totalPages, per_page } = state;\n  const { shouldReset } = options;\n\n  // checking if search query is empty\n  if (!searchQuery) {\n    showNotification('The search query cannot be empty');\n    showLoadMoreButton(false);\n    return;\n  }\n\n  // checking if the current page is bigger than number of total pages\n  if (page > totalPages) {\n    showNotification(\n      \"We're sorry, but you've reached the end of search results.\"\n    );\n    showLoadMoreButton(false);\n    return;\n  }\n\n  try {\n    // checking if the gallery should be cleaned\n    if (shouldReset) {\n      resetImages();\n    }\n\n    showLoadMoreButton(false);\n    showLoader();\n    const { hits, totalHits } = await SearchImageApi.search(searchQuery, {\n      page,\n      per_page,\n    });\n    state.totalPages = Math.ceil(totalHits / per_page);\n    addImages(hits);\n    ++state.page;\n\n    // show the load more button if there are more than 1 page in total\n    if (state.totalPages > 1) {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    showLoader(false);\n  }\n};\n\nsearchForm.addEventListener('submit', function (event) {\n  event.preventDefault();\n  state.searchQuery = this.elements.search.value;\n  state.page = 1;\n  state.totalPages = 1;\n\n  search();\n  this.reset();\n});\n\nloadMoreButton.addEventListener('click', () => {\n  search({ shouldReset: false });\n});\n"],"names":["NOTIFICATION_TYPES","THEME","showNotification","message","type","iziToast","client","axios","SearchImageApi","q","parameters","simpleLightbox","SimpleLightbox","addFooter","views","comments","downloads","likes","resetImages","selector","gallery","addImages","images","adjacentImages","webformatURL","largeImageURL","tags","props","height","searchForm","loader","loadMoreButton","state","showLoader","status","showLoadMoreButton","search","options","searchQuery","page","totalPages","per_page","shouldReset","hits","totalHits","error","event"],"mappings":"owBAGO,MAAMA,EAAqB,CAChC,MAAO,QACP,QAAS,SACX,EAEMC,EAAQ,CACZ,CAACD,EAAmB,KAAK,EAAG,CAC1B,gBAAiB,UACjB,aAAc,SACf,EACD,CAACA,EAAmB,OAAO,EAAG,CAC5B,gBAAiB,UACjB,aAAc,SACf,CACH,EAEaE,EAAmB,CAACC,EAASC,EAAOJ,EAAmB,QAAU,CAC5EK,EAAS,KAAK,CACZ,GAAGJ,EAAMG,CAAI,EACb,QAAAD,EACA,YAAa,OACb,SAAU,WACV,SAAU,GACd,CAAG,CACH,ECzBMG,EAASC,EAAM,OAAO,CAC1B,QAAS,0BACT,OAAQ,CACN,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,EACb,CACH,CAAC,EAED,MAAMC,CAAe,CACnB,aAAa,OAAOC,EAAGC,EAAa,GAAI,CAEtC,OADiB,MAAMJ,EAAO,IAAI,IAAK,CAAE,OAAQ,CAAE,GAAGI,EAAY,EAAAD,CAAC,CAAI,CAAA,GACvD,IACjB,CACH,CCbA,MAAME,EAAiB,IAAIC,EAAe,aAAc,CACtD,SAAU,GACV,aAAc,MACd,aAAc,IACd,UAAW,iBACb,CAAC,EAEKC,EAAY,CAAC,CAAE,MAAAC,EAAO,SAAAC,EAAU,UAAAC,EAAW,MAAAC,CAAK,IAC7C;AAAA;AAAA,0EAEiEA,CAAK;AAAA,0EACLH,CAAK;AAAA,6EACFC,CAAQ;AAAA,8EACPC,CAAS;AAAA;AAAA,IAK1EE,EAAc,CAACC,EAAW,aAAe,CACpD,MAAMC,EAAU,SAAS,cAAcD,CAAQ,EAC/CC,EAAQ,YAAc,EACxB,EAEaC,EAAY,CAACC,EAAQH,EAAW,aAAe,CAC1D,MAAMC,EAAU,SAAS,cAAcD,CAAQ,EAE/C,GAAIG,EAAO,SAAW,EAAG,CACvBpB,EACE,0EACN,EAEI,MACD,CAED,MAAMqB,EAAiBD,EACpB,IACC,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,GAAGC,CAAO,IAC9C;AAAA;AAAA,wCAEgCF,CAAa;AAAA;AAAA;AAAA,mBAGlCD,CAAY;AAAA,mBACZE,CAAI;AAAA;AAAA;AAAA,UAGbb,EAAUc,CAAK,CAAC;AAAA;AAAA,OAGrB,EACA,KAAK,EAAE,EAEVP,EAAQ,mBAAmB,YAAaG,CAAc,EACtDZ,EAAe,QAAO,EAEtB,KAAM,CAAE,OAAAiB,CAAQ,EAAGR,EAAQ,kBAAkB,sBAAqB,EAClE,OAAO,SAAS,CAAE,IAAKQ,EAAS,EAAG,SAAU,QAAQ,CAAE,CACzD,ECzDMC,EAAa,SAAS,cAAc,eAAe,EACnDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,YAAY,EAGpDC,EAAQ,CACZ,YAAa,GACb,KAAM,EACN,WAAY,EACZ,SAAU,EACZ,EAEMC,EAAa,CAACC,EAAS,KAAS,CAChCA,EACFJ,EAAO,UAAU,IAAI,MAAM,EAE3BA,EAAO,UAAU,OAAO,MAAM,CAElC,EAEMK,EAAqB,CAACD,EAAS,KAAS,CACxCA,EACFH,EAAe,UAAU,IAAI,MAAM,EAEnCA,EAAe,UAAU,OAAO,MAAM,CAE1C,EAEMK,EAAS,MAAOC,EAAU,CAAE,YAAa,EAAI,IAAO,CACxD,MAAMC,EAAcN,EAAM,YAAY,KAAI,EACpC,CAAE,KAAAO,EAAM,WAAAC,EAAY,SAAAC,CAAQ,EAAKT,EACjC,CAAE,YAAAU,CAAa,EAAGL,EAGxB,GAAI,CAACC,EAAa,CAChBpC,EAAiB,kCAAkC,EACnDiC,EAAmB,EAAK,EACxB,MACD,CAGD,GAAII,EAAOC,EAAY,CACrBtC,EACE,4DACN,EACIiC,EAAmB,EAAK,EACxB,MACD,CAED,GAAI,CAEEO,GACFxB,IAGFiB,EAAmB,EAAK,EACxBF,IACA,KAAM,CAAE,KAAAU,EAAM,UAAAC,CAAS,EAAK,MAAMpC,EAAe,OAAO8B,EAAa,CACnE,KAAAC,EACA,SAAAE,CACN,CAAK,EACDT,EAAM,WAAa,KAAK,KAAKY,EAAYH,CAAQ,EACjDpB,EAAUsB,CAAI,EACd,EAAEX,EAAM,KAGJA,EAAM,WAAa,GACrBG,GAEH,OAAQU,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRZ,EAAW,EAAK,CACjB,CACH,EAEAJ,EAAW,iBAAiB,SAAU,SAAUiB,EAAO,CACrDA,EAAM,eAAc,EACpBd,EAAM,YAAc,KAAK,SAAS,OAAO,MACzCA,EAAM,KAAO,EACbA,EAAM,WAAa,EAEnBI,IACA,KAAK,MAAK,CACZ,CAAC,EAEDL,EAAe,iBAAiB,QAAS,IAAM,CAC7CK,EAAO,CAAE,YAAa,EAAK,CAAE,CAC/B,CAAC"}